\section[Permutations, binomial coefficients]{Permutations and binomial coefficients continued}\label{permutationsBinomialCoefficient} 

The following lecture discusses some more problems in which binomial coefficients arise and will lead us 
to the famous principle of exclusion and inclusion.

\subsection{The cab driver problem}

We will begin with the so called 'cab driver problem'. Suppose that we have a city with streets arranged in 
a regular grid (like Manhattan) and suppose that our city contains $n$ blocks from north to south and $m$ blocks
from west to east. Now, suppose that we have a cab driver that wants to drive from one point on the grid to another
point, say from $A$ to $B$. In figure \ref{fig:cabdriverprobleminitialexample} the general setup is visualized.

\begin{figure}[ht]
    \centering
    \scalebox{.6}{\incfig{cabdriverprobleminitialexample}}
    \caption{The Cap Driver Problem.}
    \label{fig:cabdriverprobleminitialexample}
\end{figure}
\noindent
\textbf{Question:} In how many ways can we get from $A$ to $B$? We are only allowed to go east or north and we are not allowed to go backwards.
\\
\\
Let $P_{m,n}$ be the number of paths from $A$ to $B$. We notice first, that we can solve this problem by considering a sequence of letters. Let 
us denote "going north" by the letter "N" and "going east" by the letter "E", then a path from $A$ to $B$ corresponds to a sequence of N's and E's
of length $m+n$ with $n$ N's and $m$ E's. The total number of such words is equal to the total number of paths from $A$ to $B$.
\\
\\
There is also another solution. Starting from any point in the above grid, there are only two choices: go north or go east. Let $A$ be the starting point
and denote "going north in the first step" by $A'$ and "going east in the second step" by $A''$, then the total number of paths from $A$ to $B$ is equal to 
the total number of paths from $A'$ to $B$ plus the total number of paths from $A''$ to $B$. The result is a so called recurrence relation given by the following equation.
$$
P_{A \to B}=P_{A' \to B} + P_{A'' \to B}
$$
In general, if we go one step north the first time, then there are $P_{m, n-1}$ paths left from this position to $B$. Similarly, if we go east first, then there are $P_{m-1, n}$
paths left from this position to $B$. This results in the following relation.
$$
P_{m, n}=P_{m,n-1}+P_{m-1, n}
$$
Given the initial conditions $P_{0,n}=P_{m,0}=1$, and $P_{m,1}=m+1$ and $P_{1,n}=n+1$, our final solution can be found quickly.
$$
P_{m,n}={m + n \choose m}={m+n \choose n}
$$

\subsection{Balls in boxes and multisets}

Suppose that we have $k$ balls and $n$ boxes. In how many ways can we put $k$ balls into $n$ boxes? If the maximal capacity of each box is $1$, the answer would be 
$n \choose k$ if $n \geq k$ and $0$ otherwise. What happens if there are no restrictions on the capacity of boxes?
\\
This question leads us to the definition of a multiset. Let $X$ be a set.

\begin{defn}
A multiset is a function $\mu: X \to \mathbb{Z}_{\geq  0}$. The size of a multiset is $\sum_{x \in X} \mu (x)$.
\end{defn}

\begin{exmp}
Assume that we have $5$ boxes, that is $X=\{1, 2, 3, 4 ,5\}$, and $\mu(1)=1, \mu(2)=0, \mu(3)=3$ and $\mu(4)=1$. Compare this with figure \ref{fig:multisetboxesexample}. Notice that box $3$ contains 
$3$ balls. The size of $\mu$ is $5$.

\begin{figure}[ht]
    \centering
    \scalebox{0.4}{\incfig{multisetboxesexamples3}}
    \caption{Balls in boxes and mutlisets.}
    \label{fig:multisetboxesexample}
\end{figure}
\end{exmp}

It is easy to see that the number of configurations of $k$ balls into $n$ boxes corresponds to the number of multisets of $\{1,2,\cdots, n\}$
of size $k$. Now, let us interpret our problem in a slightly different way. Imagine $k$ balls and separators (visualized as "$|$") that correspond to a box. Then, the above configuration configuration 
looks as follows.
$$
0\ |\ \ |\ 000\ |\ 0
$$
For $4$ boxes, we only need $3$ separators, or in general for $n$ boxes we need $n-1$ separators. Thus, configurations of balls in boxes correspond to configurations of bars and balls.
If we consider balls and bars to be objects, then we have $k+n-1$ objects in total.
\begin{tikzcd}
    & k \text{ balls}  \\
k+n-1 \arrow[ru] \arrow[rd] &                  \\
    & n-1 \text{ bars}
\end{tikzcd}

The above investigations encourage the following theorem.

\begin{theorem}
$k$ balls can be put into $n$ boxes in ${n+k-1 \choose k}$ ways. Equivalently, the number of $k$-element multisets in $\{1, \cdots, n\}$ is ${n+k-1 \choose k}$.
\end{theorem}
\noindent
The formal proof is left as an exercise for the reader.

\subsection{Integer compositions}

We are going to discuss integer compositions in the following section. We start with the formal definition.

\begin{defn}
An integer composition of $n \in \mathbb{Z}_{> 0}$ is a presentation of $n$ as  an ordered sum $n=n_1 + n_2 + \cdots + n_k, n_1,\cdots,n_k \in \mathbb{Z}_{> 0}$.
\end{defn}

\begin{exmp}
For $n=1$ there is only one trivial presentation, that is just $1$ itself. For $n=2$ there is one presentation, namely $2=1+1$. For $n=3$ there are $4$ presentations,
 namely $3=2+1=1+2=1+1+1$. Notice that this sums are ordered, thus $1+2$ and $2+1$ are considered to be different.
 For $n=4$ there are $8$ presentations, namely $4=3+1=1+3=2+2=2+1+1=1+2+1=1+1+2=1+1+1+1$.
\end{exmp}

\begin{theorem} The following statements are true.
\begin{enumerate}[(i)]
    \item The number of compositions of $n$ is $2^{n-1}$.
    \item The number of compositions of $n$ with exactly $k$ summands is ${n-1 \choose k-1}$.
\end{enumerate}
\end{theorem}

\begin{proof}
We start with $(ii)$. The composition of $n$ with exactly $k$ summands corresponds to configurations of $n$ balls 
inside $k$ boxes, s.t. each box is nonempty. This is the same as the number of configurations of $n-k$ balls in $k$ boxes, 
which is equal to
$$
{n-k+k-1 \choose k-1} = {n-1 \choose k-1}.
$$
We continue with $(i)$. The answer is trivial. The total number of compositions follows from the following equation.
$$
{n-1 \choose 0} + {n-1 \choose 1} + \cdots + {n-1 \choose n-1}=2^{n-1}.
$$
This completes the proof.
\end{proof}

\subsection{Principle of inclusion and exclusion}

\subsection{The derangement problem}

\subsection{Exercises}

\begin{enumerate}
    \item Find the number of lattice paths from $(-2, -2)$ to $(3,3)$ passing through the point $(0,0)$ (each segment of a path goes north or east).
    \item In how many ways is it possible to permute the letters in the word \textit{EUCLID} in such a way that the order of the vowels (\textit{E,U,I}) is unchanged?
    \item Find the number of merry-go-rounds formed by $10$ carriages of two different colours.
    \item Find the number of positive integers not exceeding $300$ and \textbf{not} divisible by any of $2,3,$ and $5$.
\end{enumerate}